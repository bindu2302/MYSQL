Triggers: A Trigger, in the context of databases, is a special type of Stored procedure that automatically executes or fires in response to specific events on
particular tables or views. These events can include actions like insert,update,delete.

Benefits of Triggers in MySQL:

1. Automatic Actions: Triggers run automatically before or after changes (INSERT, UPDATE, DELETE), ensuring consistent behavior without 
   writing extra code in applications.
2. Data Integrity Enforcement: You can enforce business rules at the database level (e.g., prevent negative balances).
3. Audit Logging: Automatically log changes to a table (e.g., who changed what and when).
4.Cascade Changes: Keep related tables in sync (e.g., auto-update a timestamp in a parent table when a child table is modified).
5.Reduced Application Logic: Business rules stay in the database rather than being duplicated in multiple application layers.

Syntax:
DELIMITER //
CREATE TRIGGER trigger_name
{BEFORE | AFTER} {INSERT | UPDATE | DELETE}
ON table_name
FOR EACH ROW
BEGIN
    -- trigger logic here
END;
//

DELIMITER ;


Example 1:
-- Trigger

create table orderdetail(order_id int, product_id int, quantity int);
insert into orderdetail values(101,1,20),(102,2,30),(103,3,25),(104,4,15);
select * from orderdetail;


create table product(product_id int, quantity int);
insert into product values(1,100),(2,150),(3,183),(4,120),(5,80);
select * from product;


DELIMITER //

CREATE TRIGGER UpdateProduct
AFTER INSERT ON orderdetail
FOR EACH ROW
BEGIN
    UPDATE product
    SET quantity = quantity - NEW.quantity
    WHERE product_id = NEW.Product_id;
END;
//

DELIMITER ;

-- SET sql_safe_updates = 0;

select * from orderdetail;

insert into orderdetail values(105,5,10);

select * from product;


-- example 2
select * from orderdetail;

delimiter //
create trigger DeleteProductQuantity
after delete on orderdetail
for each row
BEGIN
update product
set quantity = quantity + OLD.quantity
where product_id = OLD.product_id;
end;
//
delimiter ;


delete from orderdetail where order_id=105;

select * from orderdetail;
select * from product;

drop trigger DeleteProductQuantity;

