What is CTE (Common Table Expression)?
-----------------------------------------
A CTE (Common Table Expression) is a temporary result set that you can reference within a SELECT, INSERT, UPDATE, or DELETE statement.
It improves query readability and reusability, especially for recursive and complex queries.

ğŸ“ When to Use CTE in MySQL?
âœ… Use CTE when:
--------------------------------
You have complex queries with multiple joins.
You need to write recursive queries.
You want to clean up long subqueries.
You want to debug sections of your query easily.

ğŸ§¾ Syntax of CTE:
------------------------------------
WITH cte_name (column1, column2, ...) AS (
    SELECT query
)
-- Use the CTE in a main query
SELECT * FROM cte_name;


You can also define multiple CTEs:
---------------------------
WITH cte1 AS (
    SELECT ...
), 
cte2 AS (
    SELECT ...
)
SELECT ...
FROM cte1
JOIN cte2 ON ...;

ğŸ¯ Use Cases / Why We Use CTE
----------------------------------------
âœ… Improve Readability of complex queries.
ğŸ”„ Recursive Queries (e.g., hierarchical/parent-child data).
ğŸ” Reuse logic within the same query.
ğŸ“„ Avoid subqueries and repeated code.
ğŸ“š Data transformation for reporting or analytics.

âœ… Advantages (Pros) of CTEs:
---------------------------------
| Feature              | Benefit                                  |
| -------------------- | ---------------------------------------- |
| ğŸ‘ Readability       | Easier to understand large queries       |
| ğŸ”„ Reusability       | Reuse result sets without subqueries     |
| ğŸ” Recursive Queries | Ideal for parent-child (tree) structures |
| ğŸ§¹ Cleaner Queries   | Reduces clutter in `SELECT` and `JOIN`s  |
| ğŸ§ª Debug-friendly    | Easy to test CTE blocks separately       |

âŒ Disadvantages (Cons) of CTEs:
---------------------------------------------
| Limitation          | Impact                                          |
| ------------------- | ----------------------------------------------- |
| ğŸ”‚ Temporary        | Can't persist like tables or views              |
| âš ï¸ Performance      | Sometimes slower than subqueries or temp tables |
| ğŸ’¾ Memory Usage     | Large CTEs use RAM; bad for big datasets        |
| ğŸ”„ Recursive Limits | Default recursion limit (e.g., 1000 rows)       |


ğŸš« When Not to Use CTE
âŒ Avoid CTE if:
-----------------------------
You're using MySQL version below 8.0 (CTEs are not supported).
You're dealing with very large datasets (performance issues).
You're nesting too many CTEs (can get confusing and slow).

ğŸ’¡ Pro Tip
You can replace a view with a CTE if itâ€™s only used temporarily in a single query and doesnâ€™t need to be stored.


